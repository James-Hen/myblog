<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>JamesHen's Blog</title>
    <link rel="stylesheet" type="text/css" href="../css/stylelist.css" />
    <link rel="stylesheet" type="text/css" href="../editor.md-master/css/editormd.min.css" />
    <link href="../css/zzsc.css" rel="stylesheet" />
    <link href="../css/maps.css" rel="stylesheet" />
    <script type="text/javascript" src="../js/maps.js"></script>
    <script type="text/javascript" src="../js/google.js"></script>
    <script type="text/javascript">$(document).ready(function () { $().maps(); });</script>
</head>

<body>
    <div class="content">
        <ul class="venus-menu">
            <li class="active">
                <a href="../../index.html">
                    <i class="icon-home"></i>主页
                </a>
            </li>
            <li>
                <a href="#">(展开)</a>
                <ul>
                    <li>
                        <a href="../about.html"><i class="icon-magic"></i>关于</a>
                    </li>
                    <li>
                        <a href="#"><i class="icon-thumbs-up"></i>条目</a>
                        <ul>
                            <li><a href="#">鬼畜家</a></li>

                            <li><a href="#">心得式</a></li>

                            <li>
                                <a href="#">OI/算法</a>
                                <ul>
                                    <li><a href="#">基础算法</a></li>
                                    <li><a href="#">数据结构</a></li>
                                </ul>
                            </li>
                            <li><a href="#">和信息没有关系</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="../timeline.html"><i class="icon-quote-right"></i>时间轴</a>
                    </li>
                    <li>
                        <a href="#"><i class="icon-envelope-alt"></i>联系我</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <div id="blankarea">

    </div>

    <div class="markdown-body editormd-preview-container" previewcontainer="true" style="padding: 20px;">
        <h1 id="h1--rational-"><a name="什么？我把Rational写好啦？" class="reference-link"></a><span class="header-link octicon octicon-link"></span>什么？我把Rational写好啦？</h1><p>好像这是一个不得不接受的事实</p>
        <p>很早我就有了开发这么一个类的想法，也写了一些简单版本过了些题目，现在突然出现了一个算通项公式的项目<del>又一个做不完的项目</del>就有必要写一个全功能的高度封装的有理数类了。</p>
        <p>完整项目代码托管在<a href="https://github.com/James-Hen/HOFinity">Github</a></p>
        <p>首先我们的目标是写出一个数据结构，能用既约分数表示所有有理数，支持四则运算等等</p>
        <p>思路大概清晰</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-cpp"><span class="com">#pragma</span><span class="pln"> once</span></code></li><li class="L1"><code class="lang-cpp"></code></li><li class="L2"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cmath&gt;</span></code></li><li class="L3"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string&gt;</span></code></li><li class="L4"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cstdio&gt;</span></code></li><li class="L5"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cstdlib&gt;</span></code></li><li class="L6"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;sstream&gt;</span></code></li><li class="L7"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;iostream&gt;</span></code></li><li class="L8"><code class="lang-cpp"></code></li><li class="L9"><code class="lang-cpp"><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"></code></li><li class="L1"><code class="lang-cpp"><span class="kwd">namespace</span><span class="pln"> </span><span class="typ">James</span></code></li><li class="L2"><code class="lang-cpp"><span class="pun">{</span></code></li><li class="L3"><code class="lang-cpp"></code></li><li class="L4"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    T gcd</span><span class="pun">(</span><span class="pln">T a</span><span class="pun">,</span><span class="pln"> T b</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> a </span><span class="pun">:</span><span class="pln"> gcd</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class="pln"> a </span><span class="pun">%</span><span class="pln"> b</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-cpp"></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    T mabs</span><span class="pun">(</span><span class="pln">T a</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> a </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="pln">a </span><span class="pun">:</span><span class="pln"> a</span><span class="pun">;</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="lang-cpp"></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">class</span><span class="pln"> rational</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">private</span><span class="pun">:</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        T sn</span><span class="pun">,</span><span class="pln"> mo</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">bool</span><span class="pln"> sign</span><span class="pun">;</span><span class="pln"> </span><span class="com">// true pos, false neg</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">void</span><span class="pln"> maintain</span><span class="pun">()</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">            sign </span><span class="pun">=</span><span class="pln"> </span><span class="pun">((</span><span class="pln">sn </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">(</span><span class="pln">mo </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">));</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">            sn </span><span class="pun">=</span><span class="pln"> mabs</span><span class="pun">(</span><span class="pln">sn</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">            mo </span><span class="pun">=</span><span class="pln"> mabs</span><span class="pun">(</span><span class="pln">mo</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">            T div</span><span class="pun">(</span><span class="pln">gcd</span><span class="pun">(</span><span class="pln">sn</span><span class="pun">,</span><span class="pln"> mo</span><span class="pun">));</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">            sn </span><span class="pun">/=</span><span class="pln"> div</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">            mo </span><span class="pun">/=</span><span class="pln"> div</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">void</span><span class="pln"> push_off</span><span class="pun">()</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">            sn </span><span class="pun">=</span><span class="pln"> sign </span><span class="pun">?</span><span class="pln"> sn </span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="pln">sn</span><span class="pun">;</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">            sign </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">public</span><span class="pun">:</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">(</span><span class="pln">T ss</span><span class="pun">,</span><span class="pln"> T mm</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> si</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">(</span><span class="pln">T ss</span><span class="pun">,</span><span class="pln"> T mm</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">(</span><span class="pln">T a</span><span class="pun">);</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">(</span><span class="pln">string a</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> to_double</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        string to_string</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        rational inverse</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">-=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">*=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        rational </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">bool</span><span class="pln"> </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">bool</span><span class="pln"> </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">bool</span><span class="pln"> </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">bool</span><span class="pln"> </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">bool</span><span class="pln"> </span><span class="kwd">operator</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="pun">};</span></code></li><li class="L0"><code class="lang-cpp"></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> istream </span><span class="pun">&amp;</span><span class="pln"> </span><span class="kwd">operator</span><span class="pun">&gt;&gt;(</span><span class="pln">istream </span><span class="pun">&amp;</span><span class="pln"> is</span><span class="pun">,</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> a</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        string obj</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        is </span><span class="pun">&gt;&gt;</span><span class="pln"> obj</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        a </span><span class="pun">=</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">obj</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> is</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-cpp"></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> ostream </span><span class="pun">&amp;</span><span class="pln"> </span><span class="kwd">operator</span><span class="pun">&lt;&lt;(</span><span class="pln">ostream </span><span class="pun">&amp;</span><span class="pln"> os</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> a</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        os </span><span class="pun">&lt;&lt;</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">to_string</span><span class="pun">();</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> os</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="lang-cpp"></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="pln">rational</span><span class="pun">(</span><span class="pln">T ss</span><span class="pun">,</span><span class="pln"> T mm</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> si</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> sn</span><span class="pun">(</span><span class="pln">ss</span><span class="pun">),</span><span class="pln"> mo</span><span class="pun">(</span><span class="pln">mm</span><span class="pun">),</span><span class="pln"> sign</span><span class="pun">(</span><span class="pln">si</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L9"><code class="lang-cpp"></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="pln">rational</span><span class="pun">(</span><span class="pln">T ss</span><span class="pun">,</span><span class="pln"> T mm</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> sn</span><span class="pun">(</span><span class="pln">ss</span><span class="pun">),</span><span class="pln"> mo</span><span class="pun">(</span><span class="pln">mm</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        maintain</span><span class="pun">();</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="lang-cpp"></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="pln">rational</span><span class="pun">(</span><span class="pln">T a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> sn</span><span class="pun">(</span><span class="pln">a</span><span class="pun">),</span><span class="pln"> mo</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">        maintain</span><span class="pun">();</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="lang-cpp"></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> </span><span class="typ">James</span><span class="pun">::</span><span class="pln">rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="pln">rational</span><span class="pun">(</span><span class="pln">string a</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        stringstream obj</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        obj </span><span class="pun">&lt;&lt;</span><span class="pln"> a</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'-'</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        </span><span class="pun">{</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">            </span><span class="kwd">char</span><span class="pln"> k</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">            obj </span><span class="pun">&gt;&gt;</span><span class="pln"> k</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">            sign </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">else</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        </span><span class="pun">{</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">            sign </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        </span><span class="typ">int</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">char</span><span class="pln"> k</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">        obj </span><span class="pun">&gt;&gt;</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        sn </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        obj </span><span class="pun">&gt;&gt;</span><span class="pln"> k </span><span class="pun">&gt;&gt;</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        mo </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="lang-cpp"></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="pln">inverse</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> rational</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">mo</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">sn</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">sign</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-cpp"></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> string </span><span class="typ">James</span><span class="pun">::</span><span class="pln">rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="pln">to_string</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        stringstream obj</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        string ans</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">sign</span><span class="pun">)</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">            obj </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'-'</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        obj </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">sn </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">'/'</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">mo</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        getline</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> ans</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="lang-cpp"></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> </span><span class="typ">James</span><span class="pun">::</span><span class="pln">rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="pln">to_double</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln">  </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">double</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">sn</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">mo </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">-&gt;</span><span class="pln">sign </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-cpp"></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">-()</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> ans</span><span class="pun">(*</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">sign </span><span class="pun">=</span><span class="pln"> </span><span class="pun">!</span><span class="pln">ans</span><span class="pun">.</span><span class="pln">sign</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-cpp"></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">+(</span><span class="kwd">const</span><span class="pln"> rational ano</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> ans</span><span class="pun">(*</span><span class="kwd">this</span><span class="pun">),</span><span class="pln"> a</span><span class="pun">(</span><span class="pln">ano</span><span class="pun">);</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">push_off</span><span class="pun">();</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        a</span><span class="pun">.</span><span class="pln">push_off</span><span class="pun">();</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        T lcmm</span><span class="pun">(</span><span class="pln">ans</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">/</span><span class="pln"> gcd</span><span class="pun">(</span><span class="pln">ans</span><span class="pun">.</span><span class="pln">mo</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">mo</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">mo</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">sn </span><span class="pun">=</span><span class="pln"> lcmm </span><span class="pun">/</span><span class="pln"> ans</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">*</span><span class="pln"> ans</span><span class="pun">.</span><span class="pln">sn </span><span class="pun">+</span><span class="pln"> lcmm </span><span class="pun">/</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">sn</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">=</span><span class="pln"> lcmm</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">maintain</span><span class="pun">();</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="lang-cpp"></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">-(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(-</span><span class="pln">a</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="lang-cpp"></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">*(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> ans</span><span class="pun">(*</span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">sign </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="pln">sign </span><span class="pun">==</span><span class="pln"> ans</span><span class="pun">.</span><span class="pln">sign</span><span class="pun">);</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        T gd1</span><span class="pun">(</span><span class="pln">gcd</span><span class="pun">(</span><span class="pln">ans</span><span class="pun">.</span><span class="pln">sn</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">mo</span><span class="pun">)),</span><span class="pln"> gd2</span><span class="pun">(</span><span class="pln">gcd</span><span class="pun">(</span><span class="pln">ans</span><span class="pun">.</span><span class="pln">mo</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">sn</span><span class="pun">));</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">=</span><span class="pln"> ans</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">/</span><span class="pln"> gd2 </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">/</span><span class="pln"> gd1</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">        ans</span><span class="pun">.</span><span class="pln">sn </span><span class="pun">=</span><span class="pln"> ans</span><span class="pun">.</span><span class="pln">sn </span><span class="pun">/</span><span class="pln"> gd1 </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">sn </span><span class="pun">/</span><span class="pln"> gd2</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-cpp"></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">/(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">const</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">inverse</span><span class="pun">();</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="lang-cpp"></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">+=(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-cpp"></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">-=(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> a</span><span class="pun">);</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="lang-cpp"></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">*=(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="lang-cpp"></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">/=(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> a</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-cpp"></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">==(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sign </span><span class="pun">==</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">sign </span><span class="pun">&amp;&amp;</span><span class="pln"> mo </span><span class="pun">==</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">&amp;&amp;</span><span class="pln"> sn </span><span class="pun">==</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">sn</span><span class="pun">);</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="lang-cpp"></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">&gt;(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sign </span><span class="pun">!=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">sign</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">        </span><span class="pun">{</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> sign </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">bool</span><span class="pln"> ans</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">        ans </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sn </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">mo </span><span class="pun">&gt;</span><span class="pln"> mo </span><span class="pun">*</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">sn</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> sign </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> ans </span><span class="pun">:</span><span class="pln"> </span><span class="pun">!</span><span class="pln">ans</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="lang-cpp"></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">&lt;(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">!(*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> a </span><span class="pun">||</span><span class="pln"> </span><span class="pun">*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> a</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="lang-cpp"></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">&gt;=(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">!(*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> a</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-cpp"></code></li><li class="L9"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">template</span><span class="pun">&lt;</span><span class="kwd">typename</span><span class="pln"> T</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">    </span><span class="kwd">inline</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> rational</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;::</span><span class="kwd">operator</span><span class="pun">&lt;=(</span><span class="kwd">const</span><span class="pln"> rational a</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">!(*</span><span class="kwd">this</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> a</span><span class="pun">);</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="lang-cpp"></code></li><li class="L5"><code class="lang-cpp"><span class="pun">}</span></code></li><li class="L6"><code class="lang-cpp"></code></li><li class="L7"><code class="lang-cpp"><span class="com">//For tests;</span></code></li><li class="L8"><code class="lang-cpp"><span class="com">//James::rational&lt;int&gt; a, b;</span></code></li><li class="L9"><code class="lang-cpp"><span class="com">//while (1)</span></code></li><li class="L0"><code class="lang-cpp"><span class="com">//{</span></code></li><li class="L1"><code class="lang-cpp"><span class="com">//    cin &gt;&gt; a &gt;&gt; b;</span></code></li><li class="L2"><code class="lang-cpp"><span class="com">//    cout</span></code></li><li class="L3"><code class="lang-cpp"><span class="com">//        &lt;&lt; "a + b : " &lt;&lt; a + b &lt;&lt; ' ' &lt;&lt; (a + b).to_double()</span></code></li><li class="L4"><code class="lang-cpp"><span class="com">//        &lt;&lt; "\na - b : " &lt;&lt; a - b</span></code></li><li class="L5"><code class="lang-cpp"><span class="com">//        &lt;&lt; "\na * b : " &lt;&lt; a * b</span></code></li><li class="L6"><code class="lang-cpp"><span class="com">//        &lt;&lt; "\na / b : " &lt;&lt; a / b</span></code></li><li class="L7"><code class="lang-cpp"><span class="com">//        &lt;&lt; "\na == b : " &lt;&lt; (a == b)</span></code></li><li class="L8"><code class="lang-cpp"><span class="com">//        &lt;&lt; "\na &gt; b : " &lt;&lt; (a &gt; b) &lt;&lt; endl;</span></code></li><li class="L9"><code class="lang-cpp"><span class="com">//}</span></code></li></ol></pre>
        <p>请原谅注释。。。</p>
    </div>

    <div id="endarea">
        张骏扬的个人博客<br />
        James-Hen@Outlook.com<br />
        Copyright: JamesHen 2017. 转载请注明出处
    </div>
</body>
</html>
